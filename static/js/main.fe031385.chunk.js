(this.webpackJsonptransitYourself=this.webpackJsonptransitYourself||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(29),o=a.n(r),i=(a(39),a(40),a(30)),l=a(13),c=a(33),d=a(6),u=a(7),p=a(10),m=a(8),h=a(3),v=a(9),g=a(1),y=a.n(g),b=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=16750").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("45"===e.MonitoredVehicleJourney.LineRef)return s.a.createElement("div",{className:"bus",key:a++},s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,s.a.createElement("br",null),s.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",s.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"buss"},"Union",e)}}]),t}(s.a.Component),f=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=16513").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("30"===e.MonitoredVehicleJourney.LineRef||"45"===e.MonitoredVehicleJourney.LineRef||"91"===e.MonitoredVehicleJourney.LineRef)return s.a.createElement("div",{className:"bus",key:a++},s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,s.a.createElement("br",null),s.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",s.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"buss"},"Stockton",e)}}]),t}(s.a.Component),S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=GG&stopCode=42006").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("4"===e.MonitoredVehicleJourney.LineRef)return s.a.createElement("div",{className:"bus",key:a++},s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,s.a.createElement("br",null),s.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",s.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"buss"},"Sansome",e)}}]),t}(s.a.Component),E=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=GG&stopCode=40032").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){return s.a.createElement("div",{className:"bus",key:a++},s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,s.a.createElement("br",null),s.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",s.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"buss"},"Van Ness",e)}}]),t}(s.a.Component),M=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=13082").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){return s.a.createElement("div",{className:"bus",key:a++},s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,s.a.createElement("br",null),s.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",s.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"buss"},"BroadWay",e)}}]),t}(s.a.Component),N=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).selectID=function(e){return e.target.select()},a.state={loaded:!1,stopCode:"EMBR",agency:"BA",agencies:[],stopLists:{},stops:[],stopFilter:"",stopsFiltered:[],stop:{Name:"Embarcadero"},buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a.loadBusss=a.loadBusss.bind(Object(h.a)(a)),a.loadStops=a.loadStops.bind(Object(h.a)(a)),a.updateStopFilter=a.updateStopFilter.bind(Object(h.a)(a)),a.selectID=a.selectID.bind(Object(h.a)(a)),a.agencyCodeLengthMap={AM:3,PE:3,VC:3,BA:4,EM:4,SA:4,AC:5,CT:5,CC:5,DE:5,FS:5,GF:5,GG:5,MA:5,RV:5,SC:5,SF:5,SR:5,UC:5,VN:5,WC:5,SS:6,WH:6,SM:6,ST:6,TD:6,"3D":6,CE:7,CM:7,SO:7},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.state.agency,"&stopCode=").concat(this.state.stopCode)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})})),y.a.get("https://api.511.org/transit/operators?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON").then((function(t){var a=t.data.filter((function(e){return!!e.WebSite}));e.setState({agencies:a})}))}},{key:"loadBusss",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.state.agency,"&stopCode=").concat(this.state.stopCode)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"updateAgency",value:function(){var e=this;return function(t){var a,n=t.currentTarget.value,s=[];e.state.stopLists[n]?(a=(s=e.state.stopLists[n])[0],e.setState({stopFilter:"",stopsFiltered:s,stopCode:a.id,buss:[],loaded:!0,stop:a,stops:s,agency:n}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(a.id)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))):e.setState({agency:t.currentTarget.value,stop:{},stops:[],stopFilter:"",stopsFiltered:[],stopCode:"",buss:[],loaded:!1})}}},{key:"loadStops",value:function(e){var t=this;this.setState({loaded:!0}),y.a.get("https://api.511.org/transit/stops?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&operator_id=".concat(this.state.agency)).then((function(e){if("BA"===t.state.agency){var a=e.data.Contents.dataObjects.ScheduledStopPoint.filter((function(e){return!e.id.includes("place")&&!e.Name.includes("Enter/Exit :")}));t.setState({stop:a.filter((function(e){return"Embarcadero"===e.Name}))[0],stopCode:"EMBR",stopFilter:"",stopsFiltered:a,stopLists:{BA:a},stops:a}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(t.state.agency,"&stopCode=").concat(t.state.stopCode?t.state.stopCode:"EMBR")).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}else{var n=e.data.Contents.dataObjects.ScheduledStopPoint,s=n[0],r=t.state.stopLists;r[t.state.agency]=n,t.setState({stop:s,stopCode:s.id,stopFilter:"",stopsFiltered:n,stopLists:r,stops:n}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(t.state.agency,"&stopCode=").concat(s.id)).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}}))}},{key:"updateStop",value:function(){var e=this;return function(t){var a=e.state.stopsFiltered[t.currentTarget.value];console.log(a),e.setState({stopCode:a.id,stop:a}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(a.id)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}}},{key:"updateStopFilter",value:function(){var e=this;return function(t){var a=t.currentTarget.value;if(1===a.length&&e.setState({stopsFiltered:e.state.stops}),a.length<3)e.setState({stopFilter:a});else if(a.length<=e.state.stopFilter.length){var n=e.state.stops;e.setState({stopFilter:a,stopsFiltered:n})}else if(a.length>=3){e.setState({stopFilter:a});var s=a.toLowerCase().split(" ");s.push(""),s.push(""),s.push("");var r=e.state.stopsFiltered.filter((function(e){var t=e.Name.toLowerCase();if(t.includes(s[0])&&t.includes(s[1])&&t.includes(s[2])&&t.includes(s[3]))return!0}));if(e.setState({stopsFiltered:r}),r[0]){var o=r[0];e.state.stopCode!==o.id&&(console.log(o),e.setState({stopCode:o.id,stop:o}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(o.id)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})})))}}}}},{key:"updateStopCode",value:function(){var e=this;return function(t){var a=t.currentTarget.value,n=a.toUpperCase();if(a.length<=e.agencyCodeLengthMap[e.state.agency]&&e.setState({stopCode:a}),a.length===e.agencyCodeLengthMap[e.state.agency]){var s=e.state.stops.filter((function(e){return e.id.toUpperCase()===n}))[0];s?(console.log(s),e.setState({stopsFiltered:e.state.stops,stopFilter:"",stopCode:n,stop:s})):e.setState({stop:{}}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(n)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a}),a[0]&&e.setState({stopCode:n})}))}}}},{key:"render",value:function(){var e,t,a,n=this;if(this.state.loaded&&!this.state.stops[0]?e=s.a.createElement("div",null,s.a.createElement("span",null,"Muni and the VTA have ",s.a.createElement("span",{className:"bold"},"~3500")," stops,"),s.a.createElement("br",null),s.a.createElement("span",null,"ACTransit more than ",s.a.createElement("span",{className:"bold"},"5000"),".")):this.state.loaded&&this.state.stops[0]&&this.state.stopFilter?e=s.a.createElement("div",null,"Loaded ",s.a.createElement("span",{className:"bold"},this.state.stops.length)," stops.",s.a.createElement("br",null),this.state.stopsFiltered.length===this.state.stops.length?"":s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"bold"},this.state.stopsFiltered.length)," in Filter.")):this.state.loaded&&this.state.stops[0]&&(e=s.a.createElement("div",null,"Loaded ",s.a.createElement("span",{className:"bold"},this.state.stops.length)," stops.",s.a.createElement("br",null))),this.state.agencies){var r=0;t=this.state.agencies.map((function(e){return s.a.createElement("option",{value:e.Id,key:r++},e.ShortName?e.ShortName:e.Name," ",e.ShortName&&e.ShortName!==e.Name?"(".concat(e.Name,")"):"")}))}if(this.state.stopsFiltered){var o=0;a=this.state.stopsFiltered.map((function(e){return s.a.createElement("option",{key:o,value:o++},e.Name," (",e.id,")")}))}var i="",l=s.a.createElement("div",{className:"bus"},"No Tracked Vehicles to show.",s.a.createElement("br",null),s.a.createElement("span",{className:"update",onClick:this.loadBusss},"Check again"),", check your inputs, or check the schedule.");if(this.state.buss[0]){i=this.state.buss[0].MonitoredVehicleJourney.MonitoredCall.StopPointName;var c=0;l=this.state.buss.map((function(e){return"BA"!==e.MonitoredVehicleJourney.OperatorRef?s.a.createElement("div",{className:"bus",key:c++},s.a.createElement("div",null,s.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef," => "),e.MonitoredVehicleJourney.DestinationName),s.a.createElement("span",{className:"gray"},n.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)),s.a.createElement("span",{className:"bold"}," => ",n.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime))):s.a.createElement("div",{className:"bus",key:c++},s.a.createElement("div",null,s.a.createElement("span",null,e.MonitoredVehicleJourney.OriginName),s.a.createElement("span",{className:"bold"}," => ",e.MonitoredVehicleJourney.DestinationName)),s.a.createElement("span",{className:"gray"},n.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)),s.a.createElement("span",{className:"bold"}," => ",n.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return s.a.createElement("div",{className:"stop"},s.a.createElement("span",{className:"short-title"},"Agency ShortList:"),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"SF"===this.state.agency,value:"SF"}),"Muni"),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"AC"===this.state.agency,value:"AC"}),"AC"),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"GG"===this.state.agency,value:"GG"}),"GG"),s.a.createElement("label",null,"\xa0\xa0\xa0",s.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"BA"===this.state.agency,value:"BA"}),"Bart"),s.a.createElement("span",{className:"agency-code"},this.state.agency),s.a.createElement("div",{className:"agencies-string"},"All ",this.state.agencies.length," Transit Agencies:",s.a.createElement("div",{className:"politics"},"(too many? i agree! ",s.a.createElement("a",{target:"_blank",href:"https://www.seamlessbayarea.org/"},"Seamless Bay Area"),")")),s.a.createElement("div",{className:"agency"},s.a.createElement("select",{className:"agency-select",value:this.state.agency,onChange:this.updateAgency(),onMouseDown:this.updateAgency()},t)),s.a.createElement("hr",null),s.a.createElement("div",{className:"slow"},this.state.loaded?this.state.stops[0]?s.a.createElement("button",{disabled:!0,className:"stop-loads"},"Loaded"):s.a.createElement("button",{disabled:!0,className:"stop-loading"},"Loading"):s.a.createElement("button",{className:"load-stops",onClick:this.loadStops},"Load Stops"),e),s.a.createElement("select",{disabled:!this.state.stopsFiltered[0],className:"stop-select",onChange:this.updateStop()},a),s.a.createElement("br",null),s.a.createElement("input",{type:"text",value:this.state.stopFilter,className:"stop-filter",onChange:this.updateStopFilter(),disabled:!this.state.loaded,placeholder:this.state.loaded?"Type to Search":"No Stops Loaded"}),s.a.createElement("br",null),s.a.createElement("div",{className:"stop-info"},s.a.createElement("input",{type:"text",value:this.state.stopCode,onChange:this.updateStopCode(),id:"stop-id",placeholder:"Stop by ID",onFocus:this.selectID}),s.a.createElement("span",{className:"stop-title"},this.state.stop.Name?this.state.stop.Name:i)),l)}}]),t}(s.a.Component);var C=function(){var e=Object(n.useState)("user"),t=Object(c.a)(e,2),a=t[0],r=t[1];return document.title="transitYourself",s.a.createElement("div",{className:"transit-master"},s.a.createElement("div",{className:"transit-switcher"},s.a.createElement("div",{className:"busemoji"},s.a.createElement("a",{href:"https://github.com/hechtoid/transitYourself",target:"_blank"},"\ud83d\ude8c")),s.a.createElement("div",{id:"marin",className:"marin"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("marin")}},"MARIN"),s.a.createElement("div",{className:"frisco"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("frisco")}},"FRISCO"),s.a.createElement("div",{className:"user"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("user")}},"USER"),s.a.createElement("div",{className:"five-eleven"},s.a.createElement("a",{href:"https://511.org/open-data/transit",target:"_blank",title:"powered by 511 open data"},s.a.createElement("img",{className:"five-eleven",src:"http://proxy-prod.511.org/assets/img/branding/511_original_web.png"})))),s.a.createElement("div",{className:"transit"},s.a.createElement("div",{className:"marin"===a?"transit-on":"transit-off"},s.a.createElement("br",null),"marin"===a?s.a.createElement(s.a.Fragment,null,s.a.createElement(S,null)," ",s.a.createElement(E,null)):""),s.a.createElement("div",{className:"frisco"===a?"transit-on":"transit-off"},s.a.createElement("br",null),"frisco"===a?s.a.createElement(s.a.Fragment,null,s.a.createElement(f,null)," ",s.a.createElement(b,null)," ",s.a.createElement(M,null)," "):""),s.a.createElement("div",{className:"user"===a?"transit-on":"transit-off"},s.a.createElement(N,null))))};var k=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(i.a,null,s.a.createElement(l.a,{exact:!0,path:"/",component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.fe031385.chunk.js.map
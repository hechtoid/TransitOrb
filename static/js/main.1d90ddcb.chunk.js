(this.webpackJsonpreact511=this.webpackJsonpreact511||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),o=a.n(s),i=(a(39),a(40),a(30)),l=a(13),c=a(33),u=a(6),d=a(7),p=a(10),m=a(8),h=a(3),v=a(9),g=a(1),y=a.n(g),b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=16750").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("45"===e.MonitoredVehicleJourney.LineRef)return r.a.createElement("div",{className:"bus",key:a++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"buss"},"Union",e)}}]),t}(r.a.Component),f=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=16513").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("30"===e.MonitoredVehicleJourney.LineRef||"45"===e.MonitoredVehicleJourney.LineRef||"91"===e.MonitoredVehicleJourney.LineRef)return r.a.createElement("div",{className:"bus",key:a++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"buss"},"Stockton",e)}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=GG&stopCode=42006").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){if("4"===e.MonitoredVehicleJourney.LineRef)return r.a.createElement("div",{className:"bus",key:a++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"buss"},"Sansome",e)}}]),t}(r.a.Component),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=GG&stopCode=40032").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){return r.a.createElement("div",{className:"bus",key:a++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"buss"},"Van Ness",e)}}]),t}(r.a.Component),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={buss:[]},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=SF&stopCode=13082").then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"render",value:function(){var e,t=this;if(this.state.buss){var a=0;e=this.state.buss.map((function(e){return r.a.createElement("div",{className:"bus",key:a++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"buss"},"BroadWay",e)}}]),t}(r.a.Component),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={loaded:!1,stopCode:"EMBR",agency:"BA",buss:[],agencies:[],stops:[],stopFilter:"",stopsFiltered:[],stop:{Name:"Embarcadero"}},a.dateParser=a.dateParser.bind(Object(h.a)(a)),a.loadBusss=a.loadBusss.bind(Object(h.a)(a)),a.loadStops=a.loadStops.bind(Object(h.a)(a)),a.updateStopFilter=a.updateStopFilter.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.state.agency,"&stopCode=").concat(this.state.stopCode)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})})),y.a.get("https://api.511.org/transit/operators?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON").then((function(t){var a=t.data.filter((function(e){return!!e.WebSite}));e.setState({agencies:a})}))}},{key:"loadBusss",value:function(e){var t=this;y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.state.agency,"&stopCode=").concat(this.state.stopCode)).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}},{key:"loadStops",value:function(e){var t=this;this.setState({loaded:!0}),y.a.get("https://api.511.org/transit/stops?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&operator_id=".concat(this.state.agency)).then((function(e){if("BA"===t.state.agency){var a=e.data.Contents.dataObjects.ScheduledStopPoint.filter((function(e){return!e.id.includes("place")&&!e.Name.includes("Enter/Exit :")}));t.setState({stop:a.filter((function(e){return"Embarcadero"===e.Name}))[0],stopCode:"EMBR",stopFilter:"",stopsFiltered:a,stops:a}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(t.state.agency,"&stopCode=").concat(t.state.stopCode?t.state.stopCode:"EMBR")).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}else{var n=e.data.Contents.dataObjects.ScheduledStopPoint,r=n[0];t.setState({stop:r,stopCode:r.id,stopFilter:"",stopsFiltered:n,stops:n}),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(t.state.agency,"&stopCode=").concat(r.id)).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}}))}},{key:"dateParser",value:function(e){return new Date(Date.parse(e)).toLocaleTimeString()}},{key:"updateStopCode",value:function(){var e=this;return function(t){var a=e.state.stops.filter((function(e){return e.id.toLowerCase()===t.currentTarget.value.toLowerCase()}))[0];a?(e.setState({stopCode:t.currentTarget.value,stopsFiltered:e.state.stops,stopFilter:"",stop:a}),console.log(a),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(t.currentTarget.value.toUpperCase())).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))):e.setState({stopCode:t.currentTarget.value})}}},{key:"updateAgency",value:function(){var e=this;return function(t){return e.setState({agency:t.currentTarget.value,stop:{},stops:[],stopFilter:"",stopsFiltered:[],stopCode:"",buss:[],loaded:!1})}}},{key:"updateStop",value:function(){var e=this;return function(t){var a=e.state.stopsFiltered[t.currentTarget.value];e.setState({stopCode:a.id,stop:a}),console.log(a),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(a.id)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}}},{key:"updateStopFilter",value:function(){var e=this;return function(t){if(1===t.currentTarget.value.length)e.setState({stopFilter:t.currentTarget.value,stopsFiltered:e.state.stops});else if(t.currentTarget.value.length<=e.state.stopFilter.length){e.state.stops;e.setState({stopFilter:t.currentTarget.value,stopsFiltered:e.state.stops})}else if(t.currentTarget.value.length>=2){var a=e.state.stopsFiltered.filter((function(e){return e.Name.toLowerCase().includes(t.currentTarget.value.toLowerCase())}));if(e.setState({stopFilter:t.currentTarget.value,stopsFiltered:a}),a[0]){var n=a[0];e.setState({stopCode:n.id,stop:n}),console.log(n),y.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(n.id)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}}}}},{key:"render",value:function(){var e,t=this;this.state.loaded&&!this.state.stops[0]?e=r.a.createElement("div",null,"Loading.....Muni and VTA have ~3500 stops,",r.a.createElement("br",null),"ACTransit more than 5000."):this.state.loaded&&this.state.stops[0]&&this.state.stopFilter?e=r.a.createElement("div",null,"Loaded ",r.a.createElement("span",{className:"bold"},this.state.stops.length)," stops.",r.a.createElement("br",null),r.a.createElement("span",{className:"bold"},this.state.stopsFiltered.length)," in Filter."):this.state.loaded&&this.state.stops[0]&&(e=r.a.createElement("div",null,"Loaded ",r.a.createElement("span",{className:"bold"},this.state.stops.length)," stops.",r.a.createElement("br",null)));var a,n,s=r.a.createElement("div",{className:"bus"},"No Tracked Vehicles to show.",r.a.createElement("br",null),r.a.createElement("span",{className:"update",onClick:this.loadBusss},"Check again"),", check your inputs, or check the schedule.");if(this.state.agencies){var o=0;n=this.state.agencies.map((function(e){return r.a.createElement("option",{value:e.Id,key:o++},e.ShortName?e.ShortName:e.Name," ",e.ShortName&&e.ShortName!==e.Name?"(".concat(e.Name,")"):"")}))}if(this.state.stopsFiltered){var i=0;a=this.state.stopsFiltered.map((function(e){return r.a.createElement("option",{key:i,value:i++},e.Name," (",e.id,")")}))}if(this.state.buss[0]){console.log(this.state.buss[0]);var l=0;s=this.state.buss.map((function(e){return"BA"!==e.MonitoredVehicleJourney.OperatorRef?r.a.createElement("div",{className:"bus",key:l++},r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.LineRef)," => ",e.MonitoredVehicleJourney.DestinationName,r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime))):r.a.createElement("div",{className:"bus",key:l++},r.a.createElement("span",null,e.MonitoredVehicleJourney.OriginName)," => ",r.a.createElement("span",{className:"bold"},e.MonitoredVehicleJourney.DestinationName),r.a.createElement("br",null),r.a.createElement("span",null,t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime))," => ",r.a.createElement("span",{className:"bold"},t.dateParser(e.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)))}))}return r.a.createElement("div",{className:"stop"},r.a.createElement("div",{className:"stop-left"},"ShortList:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"SF"===this.state.agency,value:"SF"}),"SF"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"AC"===this.state.agency,value:"AC"}),"AC"),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"GG"===this.state.agency,value:"GG"}),"GG"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"BA"===this.state.agency,value:"BA"}),"Bart"),r.a.createElement("span",{className:"agency-code"},this.state.agency),r.a.createElement("div",{className:"agencies-string"},"All ",this.state.agencies.length," Transit Agencies:",r.a.createElement("div",{className:"politics"},"(too many? i agree! SUPPORT ",r.a.createElement("a",{target:"_blank",href:"https://www.seamlessbayarea.org/"},"AB2057"),")")),r.a.createElement("div",{className:"agency"},r.a.createElement("select",{className:"agency-select",value:this.state.agency,onChange:this.updateAgency(),onMouseDown:this.updateAgency()},n)),r.a.createElement("hr",null),r.a.createElement("div",{className:"slow"},r.a.createElement("button",{className:"load-stops",onClick:this.loadStops},"Load Stops"),e),r.a.createElement("input",{type:"text",value:this.state.stopFilter,className:"stop-filter",onChange:this.updateStopFilter(),disabled:!this.state.loaded,placeholder:this.state.stopsFiltered[0]?"Live Filter (BackSpace RePopulates StopList)":"No Stops Loaded"}),r.a.createElement("br",null),r.a.createElement("select",{disabled:!this.state.stopsFiltered[0],className:"stop-select",onChange:this.updateStop(),onMouseDown:this.updateStop()},a),r.a.createElement("div",{className:"stop-info"},r.a.createElement("span",null,"Stop ID:"),r.a.createElement("input",{type:"text",value:this.state.stopCode,onChange:this.updateStopCode(),className:"stop-id",disabled:!this.state.loaded}),r.a.createElement("span",{className:"stop-title"},this.state.stop.Name," ")),s))}}]),t}(r.a.Component);var C=function(){var e=Object(n.useState)("user"),t=Object(c.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{className:"transit-master"},r.a.createElement("div",{className:"transit-switcher"},r.a.createElement("div",{className:"busemoji"},r.a.createElement("a",{href:"https://github.com/hechtoid/react511",target:"_blank"},"\ud83d\ude8c")),r.a.createElement("div",{id:"marin",className:"marin"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return s("marin")}},"MARIN"),r.a.createElement("div",{className:"frisco"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return s("frisco")}},"FRISCO"),r.a.createElement("div",{className:"user"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return s("user")}},"USER"),r.a.createElement("div",{className:"five-eleven"},r.a.createElement("a",{href:"https://511.org/open-data/transit",target:"_blank"},r.a.createElement("img",{className:"five-eleven",src:"http://proxy-prod.511.org/assets/img/branding/511_original_web.png"})))),r.a.createElement("div",{className:"transit"},r.a.createElement("div",{className:"marin"===a?"transit-on":"transit-off"},r.a.createElement(S,null),r.a.createElement(E,null)),r.a.createElement("div",{className:"frisco"===a?"transit-on":"transit-off"},r.a.createElement(f,null),r.a.createElement(b,null),r.a.createElement(M,null)),r.a.createElement("div",{className:"user"===a?"transit-on":"transit-off"},r.a.createElement(N,null))))};var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(l.a,{exact:!0,path:"/transit",component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.1d90ddcb.chunk.js.map
(this.webpackJsonptransitYourself=this.webpackJsonptransitYourself||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(30),o=a.n(r),i=(a(39),a(40),a(9)),l=a(8),c=a(33),d=a(11),u=a(12),m=a(14),p=a(13),h=a(6),g=a(15),E=a(7),v=a.n(E);var b=function(e){if("BA"===e.bus.MonitoredVehicleJourney.OperatorRef)return n.a.createElement("div",{className:"bus",id:e.bus.MonitoredVehicleJourney.LineRef},n.a.createElement("div",null,n.a.createElement("span",null,e.bus.MonitoredVehicleJourney.OriginName),n.a.createElement("span",{className:"bold"}," => ",e.bus.MonitoredVehicleJourney.DestinationName)),e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"gray"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()),n.a.createElement("span",{className:"bold"}," => ",new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)).toLocaleTimeString())):n.a.createElement("span",{className:"bold"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()));if("CT"===e.bus.MonitoredVehicleJourney.OperatorRef){var t="GY-N";return"Limited"===e.bus.MonitoredVehicleJourney.LineRef&&(t="YL-N"),"Bullet"===e.bus.MonitoredVehicleJourney.LineRef&&(t="RD-N"),n.a.createElement("div",{className:"bus",id:t},n.a.createElement("div",null,n.a.createElement("span",{className:"bold"},e.bus.MonitoredVehicleJourney.LineRef," => "),e.bus.MonitoredVehicleJourney.DestinationName),e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedDepartureTime&&e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedDepartureTime!==e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"gray"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()),n.a.createElement("span",{className:"bold"}," => ",new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedDepartureTime)).toLocaleTimeString())):n.a.createElement("span",{className:"bold"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()))}return["SF","AC","GG","SM","MA","SC"].includes(e.bus.MonitoredVehicleJourney.OperatorRef)?n.a.createElement("div",{className:"bus"},n.a.createElement("div",null,n.a.createElement("span",{title:"Track Vehicle",className:"bold"},e.bus.MonitoredVehicleJourney.VehicleRef?n.a.createElement(i.b,{className:"gps",to:{pathname:"/vehicular",state:{vehicleNumber:e.bus.MonitoredVehicleJourney.VehicleRef,agency:e.bus.MonitoredVehicleJourney.OperatorRef}}},e.bus.MonitoredVehicleJourney.LineRef,n.a.createElement("sup",null,"GPS")):n.a.createElement(n.a.Fragment,null,e.bus.MonitoredVehicleJourney.LineRef)," => "),e.bus.MonitoredVehicleJourney.DestinationName),e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"gray"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()),n.a.createElement("span",{className:"bold"}," => ",new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)).toLocaleTimeString())):n.a.createElement("span",{className:"bold"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString())):n.a.createElement("div",{className:"bus"},n.a.createElement("div",null,n.a.createElement("span",{className:"bold"},e.bus.MonitoredVehicleJourney.LineRef," => "),e.bus.MonitoredVehicleJourney.DestinationName),e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"gray"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()),n.a.createElement("span",{className:"bold"}," => ",new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.ExpectedArrivalTime)).toLocaleTimeString())):n.a.createElement("span",{className:"bold"},new Date(Date.parse(e.bus.MonitoredVehicleJourney.MonitoredCall.AimedArrivalTime)).toLocaleTimeString()))},y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={buss:[]},a.loadBusss=a.loadBusss.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadBusss()}},{key:"loadBusss",value:function(){var e=this;v.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.props.agency,"&stopCode=").concat(this.props.stop)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"render",value:function(){var e,t=n.a.createElement("div",{className:"bus"},"No Tracked Vehicles to show.",n.a.createElement("br",null),n.a.createElement("span",{className:"update",onClick:this.loadBusss},"Check again"),", check your inputs, or check the schedule.");if(this.state.buss[0]){e=this.state.buss[0].MonitoredVehicleJourney.MonitoredCall.StopPointName;var a=0;t=this.state.buss.map((function(e){return n.a.createElement(b,{bus:e,key:a++})}))}return n.a.createElement("div",{className:"buss"},this.props.title?this.props.title:e,n.a.createElement("br",null),t)}}]),t}(n.a.Component),f=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).selectID=function(e){return e.target.select()},a.state={loaded:!1,stopCode:"EMBR",agency:"BA",agencies:[],stopLists:{},stops:[],stopFilter:"",stopsFiltered:[],stop:{Name:"Embarcadero"},buss:[]},a.loadBusss=a.loadBusss.bind(Object(h.a)(a)),a.loadStops=a.loadStops.bind(Object(h.a)(a)),a.updateStopFilter=a.updateStopFilter.bind(Object(h.a)(a)),a.selectID=a.selectID.bind(Object(h.a)(a)),a.agencyCodeLengthMap={AM:3,PE:3,VC:3,BA:4,EM:4,SA:4,AC:5,CT:5,CC:5,DE:5,FS:5,GF:5,GG:5,MA:5,RV:5,SC:5,SF:5,SR:5,UC:5,VN:5,WC:5,SS:6,WH:6,SM:6,ST:6,TD:6,"3D":6,CE:7,CM:7,SO:7},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="transitYourself - anywherer",v.a.get("https://api.511.org/transit/operators?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON").then((function(t){var a=t.data.filter((function(e){return!!e.WebSite}));e.setState({agencies:a})})),this.loadBusss()}},{key:"loadBusss",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.agency,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.stopCode;v.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(a,"&stopCode=").concat(s)).then((function(e){var a=e.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;t.setState({buss:a})}))}},{key:"updateAgency",value:function(){var e=this;return function(t){var a,s=t.currentTarget.value,n=[];e.state.stopLists[s]?(a=(n=e.state.stopLists[s])[0],e.setState({stopFilter:"",stopsFiltered:n,stopCode:a.id,buss:[],loaded:!0,stop:a,stops:n,agency:s}),e.loadBusss(t,s,a.id)):e.setState({agency:t.currentTarget.value,stop:{},stops:[],stopFilter:"",stopsFiltered:[],stopCode:"",buss:[],loaded:!1})}}},{key:"loadStops",value:function(e){var t=this;this.setState({loaded:!0}),v.a.get("https://api.511.org/transit/stops?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&operator_id=".concat(this.state.agency)).then((function(a){if("BA"===t.state.agency){var s=a.data.Contents.dataObjects.ScheduledStopPoint.filter((function(e){return!e.id.includes("place")&&!e.Name.includes("Enter/Exit :")})),n=t.state.stopCode||"EMBR",r=s.filter((function(e){return e.id===n.toUpperCase()}))[0]||s.filter((function(e){return"EMBR"===e.id}))[0];t.setState({stopFilter:"",stopsFiltered:s,stopLists:{BA:s},stopCode:r.id,stops:s,stop:r}),t.loadBusss(e,t.state.agency,r.id)}else{var o=a.data.Contents.dataObjects.ScheduledStopPoint,i=o.filter((function(e){return e.id===t.state.stopCode.toUpperCase()}))[0]||o[0],l=t.state.stopLists;l[t.state.agency]=o,t.setState({stopCode:i.id,stopFilter:"",stopsFiltered:o,stopLists:l,stops:o,stop:i}),t.loadBusss(e,t.state.agency,i.id)}}))}},{key:"updateStop",value:function(){var e=this;return function(t){var a=e.state.stopsFiltered[t.currentTarget.value];console.log(a),e.setState({stopCode:a.id,stop:a}),e.loadBusss(t,e.state.agency,a.id)}}},{key:"updateStopFilter",value:function(){var e=this;return function(t){var a=t.currentTarget.value;if(1===a.length&&e.setState({stopsFiltered:e.state.stops}),a.length<3)e.setState({stopFilter:a});else if(a.length<=e.state.stopFilter.length){var s=e.state.stops;e.setState({stopFilter:a,stopsFiltered:s})}else if(a.length>=3){e.setState({stopFilter:a});var n=a.toLowerCase().split(" ");n.push(""),n.push(""),n.push("");var r=e.state.stopsFiltered.filter((function(e){var t=e.Name.toLowerCase();return!!(t.includes(n[0])&&t.includes(n[1])&&t.includes(n[2])&&t.includes(n[3]))}));if(e.setState({stopsFiltered:r}),r[0]){var o=r[0];e.state.stopCode!==o.id&&(console.log(o),e.setState({stopCode:o.id,stop:o}),e.loadBusss(t,e.state.agency,o.id))}}}}},{key:"updateStopCode",value:function(){var e=this;return function(t){var a=t.currentTarget.value,s=a.toUpperCase();if(a.length<=e.agencyCodeLengthMap[e.state.agency]&&e.setState({stopCode:a}),a.length===e.agencyCodeLengthMap[e.state.agency]){var n=e.state.stops.filter((function(e){return e.id.toUpperCase()===s}))[0];n?(console.log(n),e.setState({stopsFiltered:e.state.stops,stopFilter:"",stopCode:s,stop:n})):e.setState({stop:{}}),v.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(e.state.agency,"&stopCode=").concat(s)).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a}),a[0]&&e.setState({stopCode:s})}))}}}},{key:"render",value:function(){var e,t,a;if(this.state.loaded&&!this.state.stops[0]?e=n.a.createElement("div",null,n.a.createElement("span",null,"Muni and the VTA have ",n.a.createElement("span",{className:"stops-number"},"~3500")," stops,"),n.a.createElement("br",null),n.a.createElement("span",null,"ACTransit more than ",n.a.createElement("span",{className:"stops-number"},"5000"),".")):this.state.loaded&&this.state.stops[0]&&this.state.stopFilter?e=n.a.createElement("div",null,"Loaded ",n.a.createElement("span",{className:"stops-number"},this.state.stops.length)," stops.",n.a.createElement("br",null),this.state.stopsFiltered.length===this.state.stops.length?"":n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"stops-number"},this.state.stopsFiltered.length)," in Filter.")):this.state.loaded&&this.state.stops[0]&&(e=n.a.createElement("div",null,"Loaded ",n.a.createElement("span",{className:"stops-number"},this.state.stops.length)," stops.",n.a.createElement("br",null))),this.state.agencies){var s=0;t=this.state.agencies.map((function(e){return n.a.createElement("option",{value:e.Id,key:s++},e.ShortName?e.ShortName:e.Name," ",e.ShortName&&e.ShortName!==e.Name?"(".concat(e.Name,")"):"")}))}if(this.state.stopsFiltered){var r=0;a=this.state.stopsFiltered.map((function(e){return n.a.createElement("option",{key:r,value:r++},e.Name," (",e.id,")")}))}var o="",i=n.a.createElement("div",{className:"bus"},"No Tracked Vehicles.",n.a.createElement("br",null),n.a.createElement("span",{className:"update",onClick:this.loadBusss},"Check again"),", check your inputs, or check the schedule.");if(this.state.buss[0]){o=this.state.buss[0].MonitoredVehicleJourney.MonitoredCall.StopPointName;var l=0;i=this.state.buss.map((function(e){return n.a.createElement(b,{bus:e,key:l++})}))}return n.a.createElement("div",{className:"stop"},n.a.createElement("div",{className:"agency-upper"},n.a.createElement("div",{className:"radios"},n.a.createElement("div",{className:"short-title"},"Agency ShortList:"),n.a.createElement("div",{className:"radio-one"},n.a.createElement("label",null,n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"SF"===this.state.agency,value:"SF"}),"SF"),n.a.createElement("label",null,n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"GG"===this.state.agency,value:"GG"}),"GG"),n.a.createElement("label",null,"\xa0\xa0\xa0",n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"BA"===this.state.agency,value:"BA"}),"Bart")),n.a.createElement("div",{className:"radio-two"},n.a.createElement("label",null,n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"AC"===this.state.agency,value:"AC"}),"AC"),n.a.createElement("label",null,n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"SM"===this.state.agency,value:"SM"}),"Sam"),n.a.createElement("label",null,n.a.createElement("input",{type:"radio",onChange:this.updateAgency(),checked:"MA"===this.state.agency,value:"MA"}),"Marin"))),n.a.createElement("span",{className:"agency-code"},this.state.agency)),n.a.createElement("div",{className:"agencies-string"},"All ",this.state.agencies.length," Transit Agencies:",n.a.createElement("div",{className:"politics"},"(too many? i agree! ",n.a.createElement("a",{href:"https://www.seamlessbayarea.org/",target:"_blank",rel:"noopener noreferrer"},"Seamless Bay Area"),")")),n.a.createElement("div",{className:"agency"},n.a.createElement("select",{className:"agency-select",value:this.state.agency,onChange:this.updateAgency(),onMouseDown:this.updateAgency()},t)),n.a.createElement("hr",null),n.a.createElement("div",{className:"slow"},this.state.loaded?this.state.stops[0]?n.a.createElement("button",{disabled:!0,className:"stop-loads"},"Loaded"):n.a.createElement("button",{disabled:!0,className:"stop-loading"},"Loading"):n.a.createElement("button",{className:"load-stops",onClick:this.loadStops},"Load Stops"),e),n.a.createElement("select",{disabled:!this.state.stopsFiltered[0],className:"stop-select",onChange:this.updateStop()},this.state.stop.id?n.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:"0"},this.state.stop.Name," (",this.state.stop.id,")"):"",this.state.stop.id,a),n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:this.state.stopFilter,className:"stop-filter",onChange:this.updateStopFilter(),disabled:!this.state.loaded,placeholder:this.state.loaded?"Type to Search":"No Stops Loaded"}),n.a.createElement("br",null),n.a.createElement("div",{className:"stop-info"},n.a.createElement("span",{className:"stop-title"},this.state.stop.Name?this.state.stop.Name:o),n.a.createElement("input",{type:"text",id:"stop-id",placeholder:"Stop Code",value:this.state.stopCode,onFocus:this.selectID,onChange:this.updateStopCode()})),i)}}]),t}(n.a.Component);var N=function(){var e=Object(s.useState)("user"),t=Object(c.a)(e,2),a=t[0],r=t[1];return document.title="transitYourself",n.a.createElement("div",{className:"transit-master"},n.a.createElement("div",{className:"transit-switcher"},n.a.createElement("div",{className:"busemoji"},n.a.createElement(i.b,{to:"/vehicular"},n.a.createElement("span",{title:"Vehicle Tracker",role:"img","aria-label":"bus emoji"},"\ud83d\ude8c"))),n.a.createElement("div",{className:"frisco"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("frisco")}},"Commuter"),n.a.createElement("div",{id:"marin",className:"marin"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("marin")}},"Weekender"),n.a.createElement("div",{className:"user"===a?"transit-switch-on":"transit-switch-off",onClick:function(){return r("user")}},"Anywherer"),n.a.createElement("div",{className:"five-eleven"},n.a.createElement("a",{href:"https://511.org/open-data/transit",title:"powered by 511 open data",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{className:"five-eleven",src:"https://proxy-prod.511.org/assets/img/branding/511_original_web.png",alt:"511 logo"})))),n.a.createElement("div",{className:"transit"},n.a.createElement("div",{className:"marin"===a?"transit-on":"transit-off"},n.a.createElement("br",null),"marin"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(y,{agency:"GG",stop:"42006"}),n.a.createElement(y,{title:"Van Sess",agency:"GG",stop:"40032"})):""),n.a.createElement("div",{className:"frisco"===a?"transit-on":"transit-off"},n.a.createElement("br",null),"frisco"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(y,{agency:"SF",stop:"16513"}),n.a.createElement(y,{agency:"SF",stop:"16750"}),n.a.createElement(y,{title:"BroadWay",agency:"SF",stop:"13082"})):""),n.a.createElement("div",{className:"user"===a?"transit-on":"transit-off"},n.a.createElement(f,null))))},S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={buss:[]},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://api.511.org/transit/StopMonitoring?api_key=72939361-85f9-4019-aa55-d62e4e7e2e59&Format=JSON&agency=".concat(this.props.match.params.agency.toUpperCase(),"&stopCode=").concat(this.props.match.params.stop.toUpperCase())).then((function(t){var a=t.data.ServiceDelivery.StopMonitoringDelivery.MonitoredStopVisit;e.setState({buss:a})}))}},{key:"render",value:function(){var e,t=n.a.createElement("div",{className:"bus"},"No Tracked Vehicles to show.",n.a.createElement("br",null),n.a.createElement("span",{className:"update",onClick:function(){return window.location.reload(!1)}},"Check again"),", check your inputs, or check the schedule.");if(this.state.buss[0]){e=this.state.buss[0].MonitoredVehicleJourney.MonitoredCall.StopPointName;var a=0;t=this.state.buss.map((function(e){return n.a.createElement(b,{bus:e,key:a++})}))}return n.a.createElement("div",{className:"transit-master"},n.a.createElement("div",{className:"transit-switcher"},n.a.createElement("div",{className:"busemoji"}),n.a.createElement("div",{className:"transit"},n.a.createElement("div",{className:"transit-on"},this.props.match.params.stop.toUpperCase(),n.a.createElement("div",{className:"buss"},n.a.createElement("span",{className:"bold"},e),t)))))}}]),t}(n.a.Component),C=Object(l.e)(S);var M=function(){return n.a.createElement("div",{className:"transit-master"},n.a.createElement("div",{className:"transit-switcher"},n.a.createElement("div",{className:"busemoji"}),n.a.createElement("div",{className:"transit"},n.a.createElement("div",{className:"transit-on"},n.a.createElement(y,{title:"Twenty Fourth Street BART",agency:"BA",stop:"24TH"}),n.a.createElement(y,{title:"Millbrae BART",agency:"BA",stop:"MLBR"}),n.a.createElement(y,{title:"CalTrain MillBrae",agency:"CT",stop:"70062"}),n.a.createElement(y,{title:"CalTrain San Mateo",agency:"CT",stop:"70091"})))))};var A=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(i.a,{basename:"/transitYourself"},n.a.createElement(l.a,{exact:!0,path:"/",component:N}),n.a.createElement(l.a,{path:"/anystop/:agency/:stop",render:function(e){return n.a.createElement(C,e)}}),n.a.createElement(l.a,{exact:!0,path:"/aa",component:M})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.3db9c520.chunk.js.map